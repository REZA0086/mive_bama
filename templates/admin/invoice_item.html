{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#6898f8">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0f0f0f">
    <title>پنل ادمین - فیلم و سریال</title>


    <link rel="icon" href="assest/logo/film.ico"> <!-- Favicon -->

    <!-- fontawesome -->
    <link rel="icon" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- css -->
    <link rel="stylesheet" href="{% static 'css/main2.css' %}">

    <!-- google fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cabin:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body class="panel">
<!-- scripts -->
<script>
    // loader animation
    window.addEventListener("load", function () {
        document.querySelector('.loader-parent').classList.add('loaded');
        setTimeout(function () {
            document.querySelector('.loader-parent').remove();
        }, 3000)
    });
</script>

<!--  loader 3  -->

<!--Loader animation end-- >
< !-- --------------- -->

<!-- reloading animation -->
<div class="sendSucceseFullAnimation">
    <div class="square__cr">
        <div class="square __sq1"></div>
        <div class="square __sq2"></div>
        <div class="square __sq3"></div>
    </div>
    <div class="square__cr">
        <div class="square __sq4"></div>
        <div class="square __sq5"></div>
        <div class="square __sq6"></div>
    </div>
    <div class="square__cr">
        <div class="square __sq7"></div>
        <div class="square __sq8"></div>
        <div class="square __sq9"></div>
    </div>
</div>
<!-- reloading animation -->

<main class="panel__main__container container">
    <div class="sidebar">
        <header class="panel__left__logo">
            <div class="panel__logo">
                <a title="صفحه اصلی" class="panel__link" href="Panel.html">
                    <img loading="lazy" class="panel-logo" src="{{ media_url }}images/logo.png" alt="">
                    <p>Mive Bama</p>
                </a>
            </div>
        </header>

        <!--sidebar menu section -->
        <menu class="sidebar__menu">
            <div class="admin__info">
                <div class="admin__name">
                    <i class="admin__i" href="javascript:void(0)">
                        <svg version="1.1" viewBox="0 0 512 512">
                            <g>
                                <g>
                                    <g>
                                        <path
                                                d="M256,0c-62.737,0-113.778,54.223-113.778,120.872S193.263,241.744,256,241.744s113.778-54.223,113.778-120.872    S318.737,0,256,0z">
                                        </path>
                                    </g>
                                </g>
                                <g>
                                    <g>
                                        <path
                                                d="M256,269.786c-116.131,0-210.61,94.479-210.61,210.61V512h421.22v-31.603C466.61,364.266,372.131,269.786,256,269.786z">
                                        </path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                    </i>
                    <div class="admin__info__text">

                        <h1>{{ user.username }}</h1>
                    </div>
                </div>
                <div class="admin__icon">

                </div>
            </div>

            <nav class="actions">
                <ul class="admin__actions">
                                        <li data-dropdown-panel="true">
                        <a class="admin__actions__link" href="javascript:void(0)">
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 474.565 474.565">
                                <g>
                                    <g xmlns="http://www.w3.org/2000/svg">
                                        <path
                                                d="M255.204,102.3c-0.606-11.321-12.176-9.395-23.465-9.395C240.078,95.126,247.967,98.216,255.204,102.3z">
                                        </path>
                                        <path
                                                d="M134.524,73.928c-43.825,0-63.997,55.471-28.963,83.37c11.943-31.89,35.718-54.788,66.886-63.826   C163.921,81.685,150.146,73.928,134.524,73.928z">
                                        </path>
                                        <path
                                                d="M43.987,148.617c1.786,5.731,4.1,11.229,6.849,16.438L36.44,179.459c-3.866,3.866-3.866,10.141,0,14.015l25.375,25.383   c1.848,1.848,4.38,2.888,7.019,2.888c2.61,0,5.125-1.04,7.005-2.888l14.38-14.404c2.158,1.142,4.55,1.842,6.785,2.827   c0-0.164-0.016-0.334-0.016-0.498c0-11.771,1.352-22.875,3.759-33.302c-17.362-11.174-28.947-30.57-28.947-52.715   c0-34.592,28.139-62.739,62.723-62.739c23.418,0,43.637,13.037,54.43,32.084c11.523-1.429,22.347-1.429,35.376,1.033   c-1.676-5.07-3.648-10.032-6.118-14.683l14.396-14.411c1.878-1.856,2.918-4.38,2.918-7.004c0-2.625-1.04-5.148-2.918-7.004   l-25.361-25.367c-1.94-1.941-4.472-2.904-7.003-2.904c-2.532,0-5.063,0.963-6.989,2.904l-14.442,14.411   c-5.217-2.764-10.699-5.078-16.444-6.825V9.9c0-5.466-4.411-9.9-9.893-9.9h-35.888c-5.451,0-9.909,4.434-9.909,9.9v20.359   c-5.73,1.747-11.213,4.061-16.446,6.825L75.839,22.689c-1.942-1.941-4.473-2.904-7.005-2.904c-2.531,0-5.077,0.963-7.003,2.896   L36.44,48.048c-1.848,1.864-2.888,4.379-2.888,7.012c0,2.632,1.04,5.148,2.888,7.004l14.396,14.403   c-2.75,5.218-5.063,10.708-6.817,16.438H23.675c-5.482,0-9.909,4.441-9.909,9.915v35.889c0,5.458,4.427,9.908,9.909,9.908H43.987z">
                                        </path>
                                        <path
                                                d="M354.871,340.654c15.872-8.705,26.773-25.367,26.773-44.703c0-28.217-22.967-51.168-51.184-51.168   c-9.923,0-19.118,2.966-26.975,7.873c-4.705,18.728-12.113,36.642-21.803,52.202C309.152,310.022,334.357,322.531,354.871,340.654z   ">
                                        </path>
                                        <path
                                                d="M460.782,276.588c0-5.909-4.799-10.693-10.685-10.693H428.14c-1.896-6.189-4.411-12.121-7.393-17.75l15.544-15.544   c2.02-2.004,3.137-4.721,3.137-7.555c0-2.835-1.118-5.553-3.137-7.563l-27.363-27.371c-2.08-2.09-4.829-3.138-7.561-3.138   c-2.734,0-5.467,1.048-7.547,3.138l-15.576,15.552c-5.623-2.982-11.539-5.481-17.751-7.369v-21.958   c0-5.901-4.768-10.685-10.669-10.685H311.11c-2.594,0-4.877,1.04-6.739,2.578c3.26,11.895,5.046,24.793,5.046,38.552   c0,8.735-0.682,17.604-1.956,26.423c7.205-2.656,14.876-4.324,22.999-4.324c36.99,0,67.086,30.089,67.086,67.07   c0,23.637-12.345,44.353-30.872,56.303c13.48,14.784,24.195,32.324,31.168,51.976c1.148,0.396,2.344,0.684,3.54,0.684   c2.733,0,5.467-1.04,7.563-3.13l27.379-27.371c2.004-2.004,3.106-4.721,3.106-7.555s-1.102-5.551-3.106-7.563l-15.576-15.552   c2.982-5.621,5.497-11.555,7.393-17.75h21.957c2.826,0,5.575-1.118,7.563-3.138c2.004-1.996,3.138-4.72,3.138-7.555   L460.782,276.588z">
                                        </path>
                                        <path
                                                d="M376.038,413.906c-16.602-48.848-60.471-82.445-111.113-87.018c-16.958,17.958-37.954,29.351-61.731,29.351   c-23.759,0-44.771-11.392-61.713-29.351c-50.672,4.573-94.543,38.17-111.145,87.026l-9.177,27.013   c-2.625,7.773-1.368,16.338,3.416,23.007c4.783,6.671,12.486,10.631,20.685,10.631h315.853c8.215,0,15.918-3.96,20.702-10.631   c4.767-6.669,6.041-15.234,3.4-23.007L376.038,413.906z">
                                        </path>
                                        <path
                                                d="M120.842,206.782c0,60.589,36.883,125.603,82.352,125.603c45.487,0,82.368-65.014,82.368-125.603   C285.563,81.188,120.842,80.939,120.842,206.782z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                            <p>پنل ادمین</p>
                            <i class="fa fa-angle-down"></i>
                        </a>
                    </li>
                    
                        <ul class="admin__pages__action" data-dropdown-panel-hidden="true">
                            <li><a href="{% url 'panel:product_add' %}">افزودن محصول</a></li>
                        </ul>
                    

                    <li>
                        <a class="admin__actions__link" href="{% url 'panel:products' %}">
                            <svg version="1.1" viewBox="0 0 24 24">
                                <g>
                                    <g>
                                        <path d="m4 3a1 1 0 0 0 -1 1v7h8v-8z"></path>
                                        <path d="m20 3h-7v8h8v-7a1 1 0 0 0 -1-1zm-1 6h-4v-4h4z"></path>
                                        <path d="m9 13h-6v7a1 1 0 0 0 1 1h7v-8zm0 6h-4v-4h4z"></path>
                                        <path d="m13 13v8h7a1 1 0 0 0 1-1v-7z"></path>
                                    </g>
                                </g>
                            </svg>
                            <p>محصولات</p>
                        </a>
                    </li>
                    
                    <li>
                        <a class="admin__actions__link" href="{% url 'panel:invoice' %}">
                            <svg version="1.1" viewBox="0 0 24 24">
                                <g>
                                    <g>
                                        <path d="m4 3a1 1 0 0 0 -1 1v7h8v-8z"></path>
                                        <path d="m20 3h-7v8h8v-7a1 1 0 0 0 -1-1zm-1 6h-4v-4h4z"></path>
                                        <path d="m9 13h-6v7a1 1 0 0 0 1 1h7v-8zm0 6h-4v-4h4z"></path>
                                        <path d="m13 13v8h7a1 1 0 0 0 1-1v-7z"></path>
                                    </g>
                                </g>
                            </svg>
                            <p>سبد های خرید کاربران</p>
                        </a>
                    </li>
                    <li>
                        <a class="admin__actions__link" href="{% url 'panel:invoice_admin_detail' %}">
                            <svg version="1.1" viewBox="0 0 24 24">
                                <g>
                                    <g>
                                        <path d="m4 3a1 1 0 0 0 -1 1v7h8v-8z"></path>
                                        <path d="m20 3h-7v8h8v-7a1 1 0 0 0 -1-1zm-1 6h-4v-4h4z"></path>
                                        <path d="m9 13h-6v7a1 1 0 0 0 1 1h7v-8zm0 6h-4v-4h4z"></path>
                                        <path d="m13 13v8h7a1 1 0 0 0 1-1v-7z"></path>
                                    </g>
                                </g>
                            </svg>
                            <p>لیست جزییات سبد خرید</p>
                        </a>
                    </li>


                    

                    <li>
                        <a class="admin__actions__link" href="{% url 'panel:panel' %}">
                            <svg version="1.1" viewBox="0 0 512 512">
                                <g>
                                    <path
                                            d="m100 0h312a100.193 100.193 0 0 1 100 100v312a100.193 100.193 0 0 1 -100 100h-312a100.193 100.193 0 0 1 -100-100v-312a100.193 100.193 0 0 1 100-100zm287.244 237.263h-155.82l48.614-48.586a18.761 18.761 0 0 0 -26.533-26.532l-80.588 80.617a18.75 18.75 0 0 0 0 26.533l80.588 80.589a18.751 18.751 0 0 0 26.533-26.5l-48.614-48.586h155.82a18.766 18.766 0 0 0 0-37.531zm-281.225 84.388a18.737 18.737 0 1 0 37.474 0v-131.273a18.737 18.737 0 0 0 -37.474 0z">
                                    </path>
                                </g>
                            </svg>
                            <p>بازگشت به صفحه اصلی</p>
                        </a>
                    </li>
                </ul>
            </nav>
            <span class="panel__copy__right__text">&copy; پنل ادمین میوه باما </span>
        </menu>
        <!--sidebar menu section end -->
    </div>

    <!-- main panel container -->
    <section class="main__panel__section">
        <!-- panel header start -->
        <header class="main__panel__header ">
            <!-- menu panel header fixed -->
            <div class="mobile__panel__header">
                <div class="mobile__panel__logo ">
                    <a href="Panel.html">
                        <img loading="lazy" clsas="panel-logo" src="assest/logo/mobile-navigation-icon.svg"
                             alt="">
                    </a>
                </div>
                <button id="openPanelNav" class="OpenPanelNavbar" role="button">
                    <div class="panel-bar"></div>
                    <div class="panel-bar"></div>
                    <div class="panel-bar"></div>
                </button>
            </div>
            <!-- menu panel header fixed end-->

            <!-- panel page title -->
            <div class="panel__page__title panel-page-other-title">
                <h1>سبد های خرید
                    
                </h1>

            </div>
            <!-- panel page title end-->
        </header>
        <!-- pange header end -->

        <!-- website analytics tables -->
        <section class="website-analytics-last-cr">
            <!-- start -->
            <div class="analytics-container panel-other-page">
                <div class="analytics-table">
                    <div class="analytics-tr">

                        <!-- post id -->
                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">شناسه</h3>
                            {% for detail  in order %}
                                <li class="delete_obj{{ detail.id }}">{{ detail.id }}</li>
                            {% endfor %}
                        </ul>
                        <!-- post id -->
                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">محصول</h3>
                            {% for detail  in order %}
                                <li class="delete_obj{{ detail.id }}">{{ detail.product.title }}</li>
                            {% endfor %}
                        </ul>
                        <!-- post title -->
                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">تعداد</h3>
                            {% for detail  in order %}
                                <li class="delete_obj{{ detail.id }}">{{ detail.count }}</li>
                            {% endfor %}
                        </ul>
                        <!-- post title -->

                        <!-- post tag -->
                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">قیمت نهایی خرید</h3>
                            {% for detail  in order %}
                                <li class="delete_obj{{ detail.id }}">{{ detail.final_price }}</li>
                            {% endfor %}
                        </ul>
                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">سبد خرید مربوط(کاربر)</h3>
                            {% for detail  in order %}
                                <li class="delete_obj{{ detail.id }}">{{ detail.order }}</li>
                            {% endfor %}
                        </ul>
                        <!-- post tag -->


                        <ul class="analytics-table-container-tr">
                            <h3 class="analytics-table-th">اقدامات</h3>
                            {% for detail  in order %}
                                <li class="admin__post__actions delete_obj{{ detail.id }}">
                                    <a href="{% url 'panel:edit_invoice_item' detail.id %}" data-action-icon-2
                                       data-view-post="مشاهده محصول" data-view-button>
                                        <i class="material-icons">
                                            remove_red_eye
                                        </i>
                                    </a>

                                    <a onclick="delete_product({{ detail.id }})" data-action-icon-4
                                       data-delete-text="حذف محصول">
                                        <i class="material-icons">
                                            delete_forever
                                        </i>
                                    </a>
                                </li>
                            {% endfor %}

                        </ul>
                        <!-- admin actions buttons -->
                    </div>
                    
                </div>
            </div>
            <!-- panel paginations -->
            <a href="{% url 'panel:add_invoice_item'  %}" class="btn">
                <button tpye="button" class="add-new-post-btn" >
                    اضافه کردن لیست سبد خرید
                </button>
            </a>
            <!-- panel paginations -->
        </section>
        <!-- website analytics tables end-->
    </section>
    <!-- menu panel container end -->

</main>
<!-- main page end -->

<!-- scripts -->
<script type="text/javascript" src="{% static 'js/panel.js' %}"></script>
<script src="{% static 'js/jquery.js' %}"></script>
<script>
    
    function delete_product(id){
        
        $.get(`/Panel/invoice_item_delete/${id}/`, function (response){
            alert(response.message)
            object = $(`.delete_obj${id}`)
            for (let i = 0; i < object.length; i++) {
                object[i].remove()
            }
        })
        
    }
</script>
</body>

</html>
